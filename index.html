<!doctype html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rectina Pro Dƒõti ‚Äî Lekce 1</title>
  <style>
    :root {
      --bg: #f6f7fb;
      --ink: #1d1b2d;
      --sun: #ffd447;
      --mint: #6fe0c2;
      --sky: #7bb4ff;
      --coral: #ff7d8c;
      --violet: #635bff;
      --card: #ffffff;
      --shadow: 0 10px 35px rgba(0, 0, 0, 0.08);
      --radius: 18px;
      font-family: "Baloo 2", "Fredoka", "Nunito", "Segoe UI", sans-serif;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      background: radial-gradient(circle at 20% 20%, rgba(255, 212, 71, 0.25), transparent 30%),
                  radial-gradient(circle at 80% 10%, rgba(255, 125, 140, 0.2), transparent 28%),
                  radial-gradient(circle at 10% 80%, rgba(99, 91, 255, 0.18), transparent 25%),
                  var(--bg);
      color: var(--ink);
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }

    .page {
      max-width: 1120px;
      margin: 0 auto;
      padding: 20px 16px 80px;
    }

    header.topbar {
      display: grid;
      grid-template-columns: auto 1fr;
      align-items: center;
      gap: 16px;
      padding: 14px 16px;
      background: linear-gradient(120deg, rgba(123, 180, 255, 0.35), rgba(255, 212, 71, 0.35));
      border: 1px solid rgba(99, 91, 255, 0.12);
      border-radius: calc(var(--radius) * 1.1);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);
      backdrop-filter: blur(12px);
      position: sticky;
      top: 12px;
      z-index: 10;
    }

    .brand {
      font-weight: 800;
      letter-spacing: 0.5px;
      font-size: 1.1rem;
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }

    .brand-badge {
      width: 34px;
      height: 34px;
      border-radius: 12px;
      background: linear-gradient(145deg, var(--sun), var(--coral));
      display: grid;
      place-items: center;
      color: #1d1b2d;
      font-weight: 900;
      box-shadow: inset 0 2px 6px rgba(255, 255, 255, 0.6), 0 6px 16px rgba(0, 0, 0, 0.08);
    }

    nav { display: flex; gap: 12px; flex-wrap: wrap; align-items: center; justify-content: flex-end; margin-left: auto; }

    .nav-pills {
      display: inline-flex;
      gap: 6px;
      padding: 6px;
      background: rgba(255, 255, 255, 0.7);
      border-radius: 14px;
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6);
      border: 1px solid rgba(99, 91, 255, 0.12);
    }

    .nav-pills a {
      text-decoration: none;
      color: var(--ink);
      font-weight: 700;
      padding: 8px 12px;
      border-radius: 12px;
      transition: background 180ms ease, transform 180ms ease;
    }

    .nav-pills a:hover,
    .nav-pills a:focus-visible {
      background: rgba(123, 180, 255, 0.18);
      outline: none;
      transform: translateY(-1px);
    }

    .nav-label {
      font-weight: 800;
      padding: 8px 0;
      display: inline-flex;
      align-items: center;
    }

    .lesson-select {
      padding: 9px 12px;
      border-radius: 12px;
      border: 1px solid rgba(99, 91, 255, 0.2);
      background: rgba(255, 255, 255, 0.9);
      font-weight: 700;
      box-shadow: var(--shadow);
    }

    .top-actions { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }

    button {
      border: none;
      cursor: pointer;
      font-weight: 700;
      border-radius: 12px;
      transition: transform 140ms ease, box-shadow 140ms ease, background 140ms ease;
    }

    button:focus-visible {
      outline: 3px solid rgba(99, 91, 255, 0.35);
      outline-offset: 2px;
    }

    .pill {
      padding: 9px 14px;
      background: var(--card);
      border: 1px solid rgba(99, 91, 255, 0.12);
      box-shadow: var(--shadow);
    }

    .section {
      margin: 26px 0;
      background: rgba(255, 255, 255, 0.92);
      border-radius: calc(var(--radius) * 1.05);
      padding: 22px 20px;
      box-shadow: var(--shadow);
      border: 1px solid rgba(123, 180, 255, 0.08);
    }

    .section-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 12px;
      flex-wrap: wrap;
    }

    .section-title {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 1.2rem;
      font-weight: 800;
    }

    .tag {
      background: rgba(99, 91, 255, 0.12);
      padding: 6px 10px;
      border-radius: 10px;
      font-weight: 700;
      color: #2b2753;
      font-size: 0.9rem;
    }

    .tile-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
      gap: 12px;
    }

    .word-grid { grid-template-columns: repeat(6, minmax(0, 1fr)); }

    @media (max-width: 900px) {
      .word-grid { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); }
    }

    .tile {
      background: var(--card);
      border-radius: var(--radius);
      padding: 16px;
      display: grid;
      gap: 8px;
      align-items: start;
      min-height: 130px;
      border: 1px solid rgba(99, 91, 255, 0.08);
      box-shadow: var(--shadow);
      text-align: left;
      width: 100%;
    }

    .tile strong { font-size: 1.05rem; }
    .tile small { color: #4d4a5f; font-weight: 600; }
    .tile .mini { font-size: 0.9rem; color: #2b2753; font-weight: 600; }

    .avatar {
      width: 38px;
      height: 38px;
      border-radius: 14px;
      display: grid;
      place-items: center;
      font-weight: 800;
      color: #0f2233;
      box-shadow: inset 0 2px 8px rgba(255, 255, 255, 0.5), var(--shadow);
    }

    .word-avatar {
      width: 56px;
      height: 56px;
      border-radius: 18px;
      font-size: 2rem;
    }

    .flash-grid {
      display: grid;
      grid-template-columns: repeat(6, minmax(0, 1fr));
      gap: 14px;
    }

    @media (max-width: 900px) {
      .flash-grid {
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      }
    }

    .flash-card {
      perspective: 800px;
      height: 230px;
      position: relative;
    }

    .flash-inner {
      position: relative;
      width: 100%;
      height: 100%;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid rgba(99, 91, 255, 0.08);
      overflow: hidden;
      background: var(--card);
    }

    .flash-face {
      position: absolute;
      inset: 0;
      border-radius: var(--radius);
      padding: 16px;
      display: grid;
      gap: 8px;
      background: var(--card);
      grid-template-rows: auto 1fr auto;
      opacity: 1;
      transition: opacity 180ms ease;
    }

    .flash-illo {
      width: 52px;
      height: 52px;
      border-radius: 16px;
      background: rgba(99, 91, 255, 0.08);
      display: grid;
      place-items: center;
      font-size: 1.8rem;
      justify-self: end;
      box-shadow: inset 0 2px 8px rgba(255, 255, 255, 0.4);
    }

    .flash-back {
      background: linear-gradient(145deg, rgba(111, 224, 194, 0.2), rgba(255, 255, 255, 0.95));
      opacity: 0;
      pointer-events: none;
    }

    .flash-inner[data-flipped="true"] .flash-front { opacity: 0; pointer-events: none; }
    .flash-inner[data-flipped="true"] .flash-back { opacity: 1; pointer-events: auto; }

    .phrase-list, .gesture-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 12px;
    }

    .phrase-row, .gesture-row {
      display: flex;
      gap: 10px;
      align-items: center;
      padding: 12px;
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid rgba(99, 91, 255, 0.08);
    }

    .phrase-row button,
    .gesture-row button {
      padding: 8px 12px;
      background: rgba(99, 91, 255, 0.08);
      border: 1px solid rgba(99, 91, 255, 0.14);
      box-shadow: var(--shadow);
    }

    .video-card {
      display: grid;
      grid-template-columns: 1fr;
      gap: 14px;
      background: linear-gradient(160deg, rgba(123, 180, 255, 0.22), rgba(255, 255, 255, 0.95));
      padding: 16px;
      border-radius: var(--radius);
      border: 1px solid rgba(99, 91, 255, 0.12);
      box-shadow: var(--shadow);
      text-align: left;
    }

    .video-box {
      background: #0f2233;
      color: #fff;
      border-radius: 14px;
      min-height: 160px;
      display: grid;
      place-items: center;
      position: relative;
      overflow: hidden;
    }

    .video-box::after {
      content: "‚ñ∂";
      font-size: 2.8rem;
      color: #fff;
      opacity: 0.86;
    }

    .memory-grid {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 12px;
    }

    @media (max-width: 900px) {
      .memory-grid { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    }

    @media (max-width: 640px) {
      .memory-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }

    .memory-card {
      background: var(--card);
      border-radius: var(--radius);
      border: 1px solid rgba(99, 91, 255, 0.12);
      min-height: 100px;
      display: grid;
      place-items: center;
      font-weight: 800;
      font-size: 1rem;
      box-shadow: var(--shadow);
      position: relative;
    }

    .memory-card[data-state="hidden"] { background: linear-gradient(135deg, var(--sun), var(--mint)); color: #0f2233; }
    .memory-card[data-state="open"] { background: #fffef5; border-color: rgba(255, 212, 71, 0.8); }
    .memory-card[data-state="matched"] { background: rgba(111, 224, 194, 0.25); color: #0f4b3e; }

    .story-wrap {
      display: grid;
      gap: 12px;
    }

    .story-card {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      gap: 12px;
      padding: 14px;
      border-radius: var(--radius);
      background: linear-gradient(140deg, rgba(255, 212, 71, 0.22), rgba(255, 255, 255, 0.95));
      border: 1px solid rgba(99, 91, 255, 0.12);
      box-shadow: var(--shadow);
      align-items: center;
    }

    .story-line {
      margin: 0;
      font-weight: 700;
    }

    .story-meta {
      display: flex;
      gap: 8px;
      font-weight: 600;
      color: #4d4a5f;
      font-size: 0.95rem;
    }

    .story-slot {
      display: flex;
      gap: 8px;
      align-items: flex-start;
    }

    .story-slot.right {
      justify-content: flex-end;
    }

    .bubble {
      position: relative;
      background: #fff;
      border: 1px solid rgba(99, 91, 255, 0.16);
      border-radius: 16px;
      padding: 10px 12px;
      box-shadow: var(--shadow);
      max-width: 70%;
    }

    .bubble-left::after,
    .bubble-right::after {
      content: "";
      position: absolute;
      top: 16px;
      border: 8px solid transparent;
      filter: drop-shadow(0 2px 2px rgba(0,0,0,0.08));
    }

    .bubble-left::after {
      left: -8px;
      border-right-color: rgba(255, 255, 255, 0.95);
    }

    .bubble-right::after {
      right: -8px;
      border-left-color: rgba(255, 255, 255, 0.95);
    }

    .story-gr {
      display: none;
      color: #2b2753;
      font-weight: 700;
      margin-top: 6px;
    }

    .bubble.show-gr .story-gr {
      display: block;
    }

    .story-action {
      font-weight: 700;
      color: #5b567a;
      text-align: center;
      padding: 4px 8px;
      border-radius: 10px;
      background: rgba(99, 91, 255, 0.08);
      min-width: 90px;
    }

    .story-actors {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      align-items: center;
      margin-bottom: 8px;
    }

    .actor-chip {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 4px 0;
      border-radius: 0;
      background: transparent;
      border: none;
      box-shadow: none;
      font-weight: 800;
    }

    .actor-icon {
      width: 36px;
      height: 36px;
      border-radius: 12px;
      display: grid;
      place-items: center;
      background: rgba(255, 212, 71, 0.35);
      font-size: 1.4rem;
    }

    footer { margin-top: 30px; text-align: center; color: #4a4761; font-weight: 600; }

    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after { animation: none !important; transition: none !important; }
    }
  </style>
</head>
<body>
  <div class="page">
    <header class="topbar">
      <div class="brand">
        <div class="brand-badge" id="brandBadge">R1</div>
        <span id="brandTitle">Lekce 1 ‚Äî Barvy, pozdravy, pexeso</span>
      </div>
      <nav aria-label="Hlavn√≠ navigace">
        <span class="nav-label">Lekce</span>
        <select class="lesson-select" id="lessonSelect" aria-label="V√Ωbƒõr lekce">
          <option value="1" selected>Lekce 1</option>
          <option value="2">Lekce 2</option>
          <option value="3">Lekce 3</option>
          <option value="4">Lekce 4</option>
          <option value="5">Lekce 5</option>
          <option value="6">Lekce 6</option>
        </select>
      </nav>
    </header>

    <main id="zacatek">
      <section class="section" id="slova">
        <div class="section-header">
          <div class="section-title">
            <span class="tag">Zn√°me slova</span>
            Zaƒçneme s barvami a pozdravy
          </div>
          <span class="tag lesson-label" style="background: rgba(255, 212, 71, 0.25);">Lekce 1</span>
        </div>
        <div class="tile-grid word-grid" id="wordGrid"></div>
      </section>

      <section class="section" id="karty">
        <div class="section-header">
          <div class="section-title">
            <span class="tag" style="background: rgba(99, 91, 255, 0.15);">Flashcards</span>
            Obrac√≠me ƒçesky ‚Üî ≈ôecky
          </div>
          <button class="pill" id="shuffleFlash">Zam√≠chat karty</button>
        </div>
        <div class="flash-grid" id="flashGrid"></div>
      </section>

      <section class="section" id="gesta">
        <div class="section-header">
          <div class="section-title">
            <span class="tag" style="background: rgba(111, 224, 194, 0.25); color:#0f4b3e;">P≈ô√≠kazy</span>
            Jednoduch√© povely
          </div>
        </div>
        <div class="gesture-list" id="gestureList"></div>
      </section>

      <section class="section" id="fraze">
        <div class="section-header">
          <div class="section-title">
            <span class="tag" style="background: rgba(255, 125, 140, 0.16); color:#742436;">Slovn√≠ spojen√≠</span>
            Kr√°tk√© fr√°ze ke ƒçten√≠
          </div>
        </div>
        <div class="phrase-list" id="phraseList"></div>
      </section>

      <section class="section" id="pexeso">
        <div class="section-header">
          <div class="section-title">
            <span class="tag" style="background: rgba(99, 91, 255, 0.15);">Pexeso</span>
            Najdi dvojice CZ ‚Üî GR
          </div>
          <div class="top-actions">
            <button class="pill" id="resetPexeso">Nov√° hra</button>
            <span id="pexesoStatus" class="tag">0/6 nalezeno</span>
          </div>
        </div>
        <div class="memory-grid" id="memoryGrid" aria-live="polite"></div>
      </section>

      <section class="section" id="pribeh">
        <div class="section-header">
          <div class="section-title">
            <span class="tag" style="background: rgba(255, 212, 71, 0.25);">P≈ô√≠bƒõh</span>
            Kr√°tk√Ω p≈ô√≠bƒõh s dialogem
          </div>
        </div>
        <div class="story-actors" id="storyActorBar"></div>
        <div class="story-wrap" id="storyWrap"></div>
      </section>
    </main>

    <footer></footer>
  </div>

  <script>
    const state = {
      muted: false,
      pexesoOpen: [],
      pexesoMatched: new Set(),
      currentLesson: "1"
    };

    let audioCtx;
    const toneQueue = [];
    let speakTimeout;

    function ensureAudio() {
      if (!audioCtx) {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      }
    }

    function playTone(frequency = 600, duration = 0.25) {
      if (state.muted) return;
      ensureAudio();
      const now = audioCtx.currentTime;
      const startAt = toneQueue.length ? toneQueue[toneQueue.length - 1] + 0.05 : now;
      const endAt = startAt + duration;
      toneQueue.push(endAt);

      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.type = "sine";
      osc.frequency.value = frequency;
      gain.gain.setValueAtTime(0.12, startAt);
      gain.gain.exponentialRampToValueAtTime(0.0001, endAt);
      osc.connect(gain).connect(audioCtx.destination);
      osc.start(startAt);
      osc.stop(endAt);
      setTimeout(() => toneQueue.shift(), duration * 1000 + 80);
    }

    function speakGreek(text) {
      if (!("speechSynthesis" in window)) return;
      window.speechSynthesis.cancel();
      clearTimeout(speakTimeout);
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = "el-GR";
      utter.rate = 0.95;
      utter.pitch = 1;
      speakTimeout = setTimeout(() => window.speechSynthesis.speak(utter), 80);
    }

    const lessons = {
      "1": {
        title: "Lekce 1 ‚Äî Barvy, pozdravy, pexeso",
        words: [
          { cz: "Slunce", gr: "ŒâŒªŒπŒøœÇ", color: "var(--sun)", icon: "‚òÄÔ∏è" },
          { cz: "Mo≈ôe", gr: "ŒòŒ¨ŒªŒ±œÉœÉŒ±", color: "var(--sky)", icon: "üåä" },
          { cz: "Ahoj", gr: "ŒìŒµŒπŒ± œÉŒøœÖ", color: "var(--mint)", icon: "üëã" },
          { cz: "Pros√≠m", gr: "Œ†Œ±œÅŒ±Œ∫Œ±Œªœé", color: "var(--coral)", icon: "üòä" },
          { cz: "Dƒõkuji", gr: "ŒïœÖœáŒ±œÅŒπœÉœÑœé", color: "var(--violet)", icon: "üôè" },
          { cz: "Ruka", gr: "ŒßŒ≠œÅŒπ", color: "var(--sky)", icon: "‚úã" }
        ],
        flashcards: [
          { front: "≈Ωlut√°", back: "ŒöŒØœÑœÅŒπŒΩŒø", example: "Slunce je ≈ælut√©.", exampleGr: "Œü ŒÆŒªŒπŒøœÇ ŒµŒØŒΩŒ±Œπ Œ∫ŒØœÑœÅŒπŒΩŒøœÇ.", icon: "‚òÄÔ∏è" },
          { front: "Modr√°", back: "ŒúœÄŒªŒµ", example: "Mo≈ôe je modr√©.", exampleGr: "Œó Œ∏Œ¨ŒªŒ±œÉœÉŒ± ŒµŒØŒΩŒ±Œπ ŒºœÄŒªŒµ.", icon: "üåä" },
          { front: "Zelen√°", back: "Œ†œÅŒ¨œÉŒπŒΩŒø", example: "List je zelen√Ω.", exampleGr: "Œ§Œø œÜœçŒªŒªŒø ŒµŒØŒΩŒ±Œπ œÄœÅŒ¨œÉŒπŒΩŒø.", icon: "üåø" },
          { front: "Ahoj!", back: "ŒìŒµŒπŒ±!", example: "≈òekni: \"Ahoj, kamar√°de!\"", exampleGr: "Œ†ŒµœÇ: \"ŒìŒµŒπŒ±, œÜŒØŒªŒµ!\"", icon: "üëã" },
          { front: "Dƒõkuji", back: "ŒïœÖœáŒ±œÅŒπœÉœÑœé", example: "≈òekni: \"Dƒõkuji!\"", exampleGr: "Œ†ŒµœÇ: \"ŒïœÖœáŒ±œÅŒπœÉœÑœé!\"", icon: "üôè" },
          { front: "Pros√≠m", back: "Œ†Œ±œÅŒ±Œ∫Œ±Œªœé", example: "≈òekni: \"Pros√≠m, m≈Ø≈æe≈°?\"", exampleGr: "Œ†ŒµœÇ: \"Œ†Œ±œÅŒ±Œ∫Œ±Œªœé, ŒºœÄŒøœÅŒµŒØœÇ;\"", icon: "üòä" }
        ],
        gestures: [
          { label: "Vsta≈à!", desc: "Postav se hned.", descGr: "Œ£ŒÆŒ∫œâ œÑœéœÅŒ±.", tone: 660 },
          { label: "Sedni!", desc: "Posaƒè se dol≈Ø.", descGr: "ŒöŒ¨œÑœÉŒµ Œ∫Œ¨œÑœâ.", tone: 520 },
          { label: "Otoƒç se!", desc: "Udƒõlaj malou otoƒçku.", descGr: "ŒöŒ¨ŒΩŒµ ŒºŒπŒ± ŒºŒπŒ∫œÅŒÆ œÉœÑœÅŒøœÜŒÆ.", tone: 740 },
          { label: "≈òekni ahoj!", desc: "≈òekni nahlas \"Ahoj\".", descGr: "Œ†ŒµœÇ Œ¥œÖŒΩŒ±œÑŒ¨ ¬´ŒìŒµŒπŒ±¬ª.", tone: 600 }
        ],
        phrases: [
          { cz: "Ahoj, j√° jsem Luna.", gr: "ŒìŒµŒπŒ±, ŒµŒØŒºŒ±Œπ Œ∑ ŒõŒøœçŒΩŒ±.", tone: 430 },
          { cz: "Pod√≠vej, modr√° vlna!", gr: "ŒöŒøŒØœÑŒ±, ŒºœÄŒªŒµ Œ∫œçŒºŒ±!", tone: 710 },
          { cz: "Dƒõkuji za hru.", gr: "ŒïœÖœáŒ±œÅŒπœÉœÑœé Œ≥ŒπŒ± œÑŒø œÄŒ±ŒπœáŒΩŒØŒ¥Œπ.", tone: 520 },
          { cz: "Chci hr√°t pexeso.", gr: "ŒòŒ≠Œªœâ ŒΩŒ± œÄŒ±ŒØŒæœâ ŒºŒΩŒÆŒºŒ∑.", tone: 640 }
        ],
        pexeso: [
          { id: "sun", label: "Slunce", lang: "CZ" },
          { id: "sun", label: "ŒâŒªŒπŒøœÇ", lang: "GR" },
          { id: "sea", label: "Mo≈ôe", lang: "CZ" },
          { id: "sea", label: "ŒòŒ¨ŒªŒ±œÉœÉŒ±", lang: "GR" },
          { id: "hi", label: "Ahoj", lang: "CZ" },
          { id: "hi", label: "ŒìŒµŒπŒ±", lang: "GR" },
          { id: "blue", label: "Modr√°", lang: "CZ" },
          { id: "blue", label: "ŒúœÄŒªŒµ", lang: "GR" },
          { id: "yellow", label: "≈Ωlut√°", lang: "CZ" },
          { id: "yellow", label: "ŒöŒØœÑœÅŒπŒΩŒø", lang: "GR" },
          { id: "thanks", label: "Dƒõkuji", lang: "CZ" },
          { id: "thanks", label: "ŒïœÖœáŒ±œÅŒπœÉœÑœé", lang: "GR" }
        ]
      },
      "2": {
        title: "Lekce 2 ‚Äî ƒå√≠sla a d≈Øm",
        words: [
          { cz: "Jedna", gr: "ŒàŒΩŒ±", color: "var(--sun)", icon: "1Ô∏è‚É£" },
          { cz: "Dva", gr: "ŒîœçŒø", color: "var(--sky)", icon: "2Ô∏è‚É£" },
          { cz: "T≈ôi", gr: "Œ§œÅŒØŒ±", color: "var(--mint)", icon: "3Ô∏è‚É£" },
          { cz: "D≈Øm", gr: "Œ£œÄŒØœÑŒπ", color: "var(--coral)", icon: "üè†" },
          { cz: "St≈Øl", gr: "Œ§œÅŒ±œÄŒ≠Œ∂Œπ", color: "var(--violet)", icon: "ü™ë" },
          { cz: "Postel", gr: "ŒöœÅŒµŒ≤Œ¨œÑŒπ", color: "var(--sky)", icon: "üõèÔ∏è" }
        ],
        flashcards: [
          { front: "Jedna", back: "ŒàŒΩŒ±", example: "M√°m jednu knihu.", exampleGr: "Œàœáœâ Œ≠ŒΩŒ± Œ≤ŒπŒ≤ŒªŒØŒø.", icon: "1Ô∏è‚É£" },
          { front: "Dva", back: "ŒîœçŒø", example: "Vid√≠m dva stoly.", exampleGr: "ŒíŒªŒ≠œÄœâ Œ¥œçŒø œÑœÅŒ±œÄŒ≠Œ∂ŒπŒ±.", icon: "2Ô∏è‚É£" },
          { front: "T≈ôi", back: "Œ§œÅŒØŒ±", example: "T≈ôi dƒõti si hraj√≠.", exampleGr: "Œ§œÅŒØŒ± œÄŒ±ŒπŒ¥ŒπŒ¨ œÄŒ±ŒØŒ∂ŒøœÖŒΩ.", icon: "3Ô∏è‚É£" },
          { front: "D≈Øm", back: "Œ£œÄŒØœÑŒπ", example: "D≈Øm je velk√Ω.", exampleGr: "Œ§Œø œÉœÄŒØœÑŒπ ŒµŒØŒΩŒ±Œπ ŒºŒµŒ≥Œ¨ŒªŒø.", icon: "üè†" },
          { front: "St≈Øl", back: "Œ§œÅŒ±œÄŒ≠Œ∂Œπ", example: "St≈Øl je d≈ôevƒõn√Ω.", exampleGr: "Œ§Œø œÑœÅŒ±œÄŒ≠Œ∂Œπ ŒµŒØŒΩŒ±Œπ ŒæœçŒªŒπŒΩŒø.", icon: "ü™ë" },
          { front: "Postel", back: "ŒöœÅŒµŒ≤Œ¨œÑŒπ", example: "Postel je mƒõkk√°.", exampleGr: "Œ§Œø Œ∫œÅŒµŒ≤Œ¨œÑŒπ ŒµŒØŒΩŒ±Œπ ŒºŒ±ŒªŒ±Œ∫œå.", icon: "üõèÔ∏è" }
        ],
        gestures: [
          { label: "Spoƒç√≠tej do t≈ô√≠!", desc: "≈òekni jedna, dva, t≈ôi.", descGr: "Œ†ŒµœÇ Œ≠ŒΩŒ±, Œ¥œçŒø, œÑœÅŒØŒ±.", tone: 600 },
          { label: "Zaklepej!", desc: "Zaklepej na st≈Øl.", descGr: "ŒßœÑœçœÄŒ± Œ±œÄŒ±ŒªŒ¨ œÑŒø œÑœÅŒ±œÄŒ≠Œ∂Œπ.", tone: 500 }
        ],
        phrases: [
          { cz: "Jedna ≈æidle.", gr: "ŒúŒØŒ± Œ∫Œ±œÅŒ≠Œ∫ŒªŒ±.", tone: 480 },
          { cz: "Dvƒõ okna.", gr: "ŒîœçŒø œÄŒ±œÅŒ¨Œ∏œÖœÅŒ±.", tone: 520 },
          { cz: "D≈Øm je tady.", gr: "Œ§Œø œÉœÄŒØœÑŒπ ŒµŒØŒΩŒ±Œπ ŒµŒ¥œé.", tone: 560 }
        ],
        pexeso: [
          { id: "one", label: "Jedna", lang: "CZ" },
          { id: "one", label: "ŒàŒΩŒ±", lang: "GR" },
          { id: "two", label: "Dva", lang: "CZ" },
          { id: "two", label: "ŒîœçŒø", lang: "GR" },
          { id: "three", label: "T≈ôi", lang: "CZ" },
          { id: "three", label: "Œ§œÅŒØŒ±", lang: "GR" },
          { id: "house", label: "D≈Øm", lang: "CZ" },
          { id: "house", label: "Œ£œÄŒØœÑŒπ", lang: "GR" },
          { id: "table", label: "St≈Øl", lang: "CZ" },
          { id: "table", label: "Œ§œÅŒ±œÄŒ≠Œ∂Œπ", lang: "GR" },
          { id: "bed", label: "Postel", lang: "CZ" },
          { id: "bed", label: "ŒöœÅŒµŒ≤Œ¨œÑŒπ", lang: "GR" }
        ]
      },
      "3": {
        title: "Lekce 3 ‚Äî J√≠dlo a pit√≠",
        words: [
          { cz: "Chl√©b", gr: "Œ®œâŒºŒØ", color: "var(--sun)", icon: "üçû" },
          { cz: "Voda", gr: "ŒùŒµœÅœå", color: "var(--sky)", icon: "üíß" },
          { cz: "Jablko", gr: "ŒúŒÆŒªŒø", color: "var(--mint)", icon: "üçé" },
          { cz: "Ml√©ko", gr: "ŒìŒ¨ŒªŒ±", color: "var(--violet)", icon: "ü•õ" },
          { cz: "S√Ωr", gr: "Œ§œÖœÅŒØ", color: "var(--coral)", icon: "üßÄ" },
          { cz: "Med", gr: "ŒúŒ≠ŒªŒπ", color: "var(--sun)", icon: "üçØ" }
        ],
        flashcards: [
          { front: "Chl√©b", back: "Œ®œâŒºŒØ", example: "Chl√©b je ƒçerstv√Ω.", exampleGr: "Œ§Œø œàœâŒºŒØ ŒµŒØŒΩŒ±Œπ œÜœÅŒ≠œÉŒ∫Œø.", icon: "üçû" },
          { front: "Voda", back: "ŒùŒµœÅœå", example: "Voda je studen√°.", exampleGr: "Œ§Œø ŒΩŒµœÅœå ŒµŒØŒΩŒ±Œπ Œ∫œÅœçŒø.", icon: "üíß" },
          { front: "Jablko", back: "ŒúŒÆŒªŒø", example: "Jablko je ƒçerven√©.", exampleGr: "Œ§Œø ŒºŒÆŒªŒø ŒµŒØŒΩŒ±Œπ Œ∫œåŒ∫Œ∫ŒπŒΩŒø.", icon: "üçé" },
          { front: "Ml√©ko", back: "ŒìŒ¨ŒªŒ±", example: "Ml√©ko je b√≠l√©.", exampleGr: "Œ§Œø Œ≥Œ¨ŒªŒ± ŒµŒØŒΩŒ±Œπ Œ¨œÉœÄœÅŒø.", icon: "ü•õ" },
          { front: "S√Ωr", back: "Œ§œÖœÅŒØ", example: "S√Ωr je chutn√Ω.", exampleGr: "Œ§Œø œÑœÖœÅŒØ ŒµŒØŒΩŒ±Œπ ŒΩœåœÉœÑŒπŒºŒø.", icon: "üßÄ" },
          { front: "Med", back: "ŒúŒ≠ŒªŒπ", example: "Med je sladk√Ω.", exampleGr: "Œ§Œø ŒºŒ≠ŒªŒπ ŒµŒØŒΩŒ±Œπ Œ≥ŒªœÖŒ∫œå.", icon: "üçØ" }
        ],
        gestures: [
          { label: "Napij se!", desc: "Udƒõlaj gesto pit√≠.", descGr: "ŒöŒ¨ŒΩŒµ Œ∫ŒØŒΩŒ∑œÉŒ∑ œåœÑŒπ œÄŒØŒΩŒµŒπœÇ.", tone: 600 },
          { label: "Zahraj si jablko!", desc: "P≈ôilo≈æ ruce jako kousnut√≠.", descGr: "ŒöŒ¨ŒΩŒµ œÄœâœÇ Œ¥Œ±Œ≥Œ∫œéŒΩŒµŒπœÇ ŒºŒÆŒªŒø.", tone: 520 }
        ],
        phrases: [
          { cz: "M√°m hlad.", gr: "Œ†ŒµŒπŒΩŒ¨œâ.", tone: 520 },
          { cz: "M√°m ≈æ√≠ze≈à.", gr: "ŒîŒπœàŒ¨œâ.", tone: 540 },
          { cz: "Chci jablko.", gr: "ŒòŒ≠Œªœâ Œ≠ŒΩŒ± ŒºŒÆŒªŒø.", tone: 560 }
        ],
        pexeso: [
          { id: "bread", label: "Chl√©b", lang: "CZ" },
          { id: "bread", label: "Œ®œâŒºŒØ", lang: "GR" },
          { id: "water", label: "Voda", lang: "CZ" },
          { id: "water", label: "ŒùŒµœÅœå", lang: "GR" },
          { id: "apple", label: "Jablko", lang: "CZ" },
          { id: "apple", label: "ŒúŒÆŒªŒø", lang: "GR" },
          { id: "milk", label: "Ml√©ko", lang: "CZ" },
          { id: "milk", label: "ŒìŒ¨ŒªŒ±", lang: "GR" },
          { id: "cheese", label: "S√Ωr", lang: "CZ" },
          { id: "cheese", label: "Œ§œÖœÅŒØ", lang: "GR" },
          { id: "honey", label: "Med", lang: "CZ" },
          { id: "honey", label: "ŒúŒ≠ŒªŒπ", lang: "GR" }
        ]
      },
      "4": {
        title: "Lekce 4 ‚Äî Rodina",
        words: [
          { cz: "M√°ma", gr: "ŒúŒ±ŒºŒ¨", color: "var(--coral)", icon: "üë©" },
          { cz: "T√°ta", gr: "ŒúœÄŒ±ŒºœÄŒ¨œÇ", color: "var(--sky)", icon: "üë®" },
          { cz: "Bratr", gr: "ŒëŒ¥ŒµŒªœÜœåœÇ", color: "var(--mint)", icon: "üßí" },
          { cz: "Sestra", gr: "ŒëŒ¥ŒµŒªœÜŒÆ", color: "var(--violet)", icon: "üëß" },
          { cz: "Babi", gr: "ŒìŒπŒ±Œ≥ŒπŒ¨", color: "var(--sun)", icon: "üëµ" },
          { cz: "Dƒõda", gr: "Œ†Œ±œÄœÄŒøœçœÇ", color: "var(--sun)", icon: "üë¥" }
        ],
        flashcards: [
          { front: "M√°ma", back: "ŒúŒ±ŒºŒ¨", example: "M√°ma ƒçte knihu.", exampleGr: "Œó ŒºŒ±ŒºŒ¨ Œ¥ŒπŒ±Œ≤Œ¨Œ∂ŒµŒπ Œ≤ŒπŒ≤ŒªŒØŒø.", icon: "üë©" },
          { front: "T√°ta", back: "ŒúœÄŒ±ŒºœÄŒ¨œÇ", example: "T√°ta va≈ô√≠.", exampleGr: "Œü ŒºœÄŒ±ŒºœÄŒ¨œÇ ŒºŒ±Œ≥ŒµŒπœÅŒµœçŒµŒπ.", icon: "üë®" },
          { front: "Bratr", back: "ŒëŒ¥ŒµŒªœÜœåœÇ", example: "Bratr si hraje.", exampleGr: "Œü Œ±Œ¥ŒµŒªœÜœåœÇ œÄŒ±ŒØŒ∂ŒµŒπ.", icon: "üßí" },
          { front: "Sestra", back: "ŒëŒ¥ŒµŒªœÜŒÆ", example: "Sestra zp√≠v√°.", exampleGr: "Œó Œ±Œ¥ŒµŒªœÜŒÆ œÑœÅŒ±Œ≥ŒøœÖŒ¥Œ¨.", icon: "üëß" },
          { front: "Babi", back: "ŒìŒπŒ±Œ≥ŒπŒ¨", example: "Babi peƒçe kol√°ƒç.", exampleGr: "Œó Œ≥ŒπŒ±Œ≥ŒπŒ¨ œàŒÆŒΩŒµŒπ œÄŒØœÑŒ±.", icon: "üëµ" },
          { front: "Dƒõda", back: "Œ†Œ±œÄœÄŒøœçœÇ", example: "Dƒõda ƒçte noviny.", exampleGr: "Œü œÄŒ±œÄœÄŒøœçœÇ Œ¥ŒπŒ±Œ≤Œ¨Œ∂ŒµŒπ ŒµœÜŒ∑ŒºŒµœÅŒØŒ¥Œ±.", icon: "üë¥" }
        ],
        gestures: [
          { label: "Objem babi!", desc: "Nat√°hni ruce pro obejmut√≠.", descGr: "ŒÜœÄŒªœâœÉŒµ œÑŒ± œáŒ≠œÅŒπŒ± Œ≥ŒπŒ± Œ±Œ≥Œ∫Œ±ŒªŒπŒ¨.", tone: 640 },
          { label: "Zavolej t√°tu!", desc: "≈òekni ‚Äût√°to‚Äú.", descGr: "Œ†ŒµœÇ ¬´ŒºœÄŒ±ŒºœÄŒ¨¬ª.", tone: 580 }
        ],
        phrases: [
          { cz: "Miluji svou rodinu.", gr: "ŒëŒ≥Œ±œÄœé œÑŒ∑ŒΩ ŒøŒπŒ∫ŒøŒ≥Œ≠ŒΩŒµŒπŒ¨ ŒºŒøœÖ.", tone: 600 },
          { cz: "M√°ma je tady.", gr: "Œó ŒºŒ±ŒºŒ¨ ŒµŒØŒΩŒ±Œπ ŒµŒ¥œé.", tone: 540 },
          { cz: "T√°ta se usm√≠v√°.", gr: "Œü ŒºœÄŒ±ŒºœÄŒ¨œÇ œáŒ±ŒºŒøŒ≥ŒµŒªŒ¨.", tone: 520 }
        ],
        pexeso: [
          { id: "mom", label: "M√°ma", lang: "CZ" },
          { id: "mom", label: "ŒúŒ±ŒºŒ¨", lang: "GR" },
          { id: "dad", label: "T√°ta", lang: "CZ" },
          { id: "dad", label: "ŒúœÄŒ±ŒºœÄŒ¨œÇ", lang: "GR" },
          { id: "bro", label: "Bratr", lang: "CZ" },
          { id: "bro", label: "ŒëŒ¥ŒµŒªœÜœåœÇ", lang: "GR" },
          { id: "sis", label: "Sestra", lang: "CZ" },
          { id: "sis", label: "ŒëŒ¥ŒµŒªœÜŒÆ", lang: "GR" },
          { id: "granma", label: "Babi", lang: "CZ" },
          { id: "granma", label: "ŒìŒπŒ±Œ≥ŒπŒ¨", lang: "GR" },
          { id: "granpa", label: "Dƒõda", lang: "CZ" },
          { id: "granpa", label: "Œ†Œ±œÄœÄŒøœçœÇ", lang: "GR" }
        ]
      },
      "5": {
        title: "Lekce 5 ‚Äî ≈†kola a h≈ôi≈°tƒõ",
        words: [
          { cz: "≈†kola", gr: "Œ£œáŒøŒªŒµŒØŒø", color: "var(--violet)", icon: "üè´" },
          { cz: "Kniha", gr: "ŒíŒπŒ≤ŒªŒØŒø", color: "var(--sun)", icon: "üìï" },
          { cz: "Tu≈æka", gr: "ŒúŒøŒªœçŒ≤Œπ", color: "var(--sky)", icon: "‚úèÔ∏è" },
          { cz: "M√≠ƒç", gr: "ŒúœÄŒ¨ŒªŒ±", color: "var(--mint)", icon: "‚öΩ" },
          { cz: "H≈ôi≈°tƒõ", gr: "Œ†Œ±ŒπŒ¥ŒπŒ∫ŒÆ œáŒ±œÅŒ¨", color: "var(--coral)", icon: "üõù" },
          { cz: "Kreslit", gr: "ŒñœâŒ≥œÅŒ±œÜŒØŒ∂œâ", color: "var(--sun)", icon: "üé®" }
        ],
        flashcards: [
          { front: "≈†kola", back: "Œ£œáŒøŒªŒµŒØŒø", example: "≈†kola je bl√≠zko.", exampleGr: "Œ§Œø œÉœáŒøŒªŒµŒØŒø ŒµŒØŒΩŒ±Œπ Œ∫ŒøŒΩœÑŒ¨.", icon: "üè´" },
          { front: "Kniha", back: "ŒíŒπŒ≤ŒªŒØŒø", example: "ƒåtu knihu.", exampleGr: "ŒîŒπŒ±Œ≤Œ¨Œ∂œâ Œ≠ŒΩŒ± Œ≤ŒπŒ≤ŒªŒØŒø.", icon: "üìï" },
          { front: "Tu≈æka", back: "ŒúŒøŒªœçŒ≤Œπ", example: "Tu≈æka kresl√≠.", exampleGr: "Œ§Œø ŒºŒøŒªœçŒ≤Œπ œÉœáŒµŒ¥ŒπŒ¨Œ∂ŒµŒπ.", icon: "‚úèÔ∏è" },
          { front: "M√≠ƒç", back: "ŒúœÄŒ¨ŒªŒ±", example: "M√≠ƒç let√≠.", exampleGr: "Œó ŒºœÄŒ¨ŒªŒ± œÄŒµœÑŒ¨ŒµŒπ.", icon: "‚öΩ" },
          { front: "H≈ôi≈°tƒõ", back: "Œ†Œ±ŒπŒ¥ŒπŒ∫ŒÆ œáŒ±œÅŒ¨", example: "H≈ôi≈°tƒõ je vesel√©.", exampleGr: "Œó œÄŒ±ŒπŒ¥ŒπŒ∫ŒÆ œáŒ±œÅŒ¨ ŒµŒØŒΩŒ±Œπ œáŒ±œÅŒøœçŒºŒµŒΩŒ∑.", icon: "üõù" },
          { front: "Kreslit", back: "ŒñœâŒ≥œÅŒ±œÜŒØŒ∂œâ", example: "Kresl√≠m d≈Øm.", exampleGr: "ŒñœâŒ≥œÅŒ±œÜŒØŒ∂œâ Œ≠ŒΩŒ± œÉœÄŒØœÑŒπ.", icon: "üé®" }
        ],
        gestures: [
          { label: "Nakresli kruh!", desc: "Nakresli prstem do vzduchu.", descGr: "ŒñœâŒ≥œÅŒ¨œÜŒπœÉŒµ Œ≠ŒΩŒ±ŒΩ Œ∫œçŒ∫ŒªŒø œÉœÑŒøŒΩ Œ±Œ≠œÅŒ±.", tone: 650 },
          { label: "Kopni m√≠ƒç!", desc: "Uka≈æ kopnut√≠ nohou.", descGr: "ŒîŒµŒØŒæŒµ œÄœâœÇ Œ∫ŒªœâœÑœÉŒ¨œÇ ŒºœÄŒ¨ŒªŒ±.", tone: 540 }
        ],
        phrases: [
          { cz: "Jdu do ≈°koly.", gr: "Œ†Œ¨œâ œÉœÑŒø œÉœáŒøŒªŒµŒØŒø.", tone: 520 },
          { cz: "M√°m knihu.", gr: "Œàœáœâ Œ≠ŒΩŒ± Œ≤ŒπŒ≤ŒªŒØŒø.", tone: 540 },
          { cz: "Hraju si s m√≠ƒçem.", gr: "Œ†Œ±ŒØŒ∂œâ ŒºŒµ œÑŒ∑ŒΩ ŒºœÄŒ¨ŒªŒ±.", tone: 560 }
        ],
        pexeso: [
          { id: "school", label: "≈†kola", lang: "CZ" },
          { id: "school", label: "Œ£œáŒøŒªŒµŒØŒø", lang: "GR" },
          { id: "book", label: "Kniha", lang: "CZ" },
          { id: "book", label: "ŒíŒπŒ≤ŒªŒØŒø", lang: "GR" },
          { id: "pencil", label: "Tu≈æka", lang: "CZ" },
          { id: "pencil", label: "ŒúŒøŒªœçŒ≤Œπ", lang: "GR" },
          { id: "ball", label: "M√≠ƒç", lang: "CZ" },
          { id: "ball", label: "ŒúœÄŒ¨ŒªŒ±", lang: "GR" },
          { id: "play", label: "H≈ôi≈°tƒõ", lang: "CZ" },
          { id: "play", label: "Œ†Œ±ŒπŒ¥ŒπŒ∫ŒÆ œáŒ±œÅŒ¨", lang: "GR" },
          { id: "draw", label: "Kreslit", lang: "CZ" },
          { id: "draw", label: "ŒñœâŒ≥œÅŒ±œÜŒØŒ∂œâ", lang: "GR" }
        ]
      },
      "6": {
        title: "Lekce 6 ‚Äî V parku",
        actors: "Luna ‚Üî T√°ta",
        storyActors: {
          left: { name: "Luna", icon: "üßí" },
          right: { name: "T√°ta", icon: "üë®" }
        },
        words: [],
        flashcards: [
          { front: "Park", back: "Œ†Œ¨œÅŒ∫Œø", example: "Jdeme do parku.", exampleGr: "Œ†Œ¨ŒºŒµ œÉœÑŒø œÄŒ¨œÅŒ∫Œø.", icon: "üå≥" },
          { front: "Laviƒçka", back: "Œ†Œ±Œ≥Œ∫Œ¨Œ∫Œπ", example: "Sed√≠m na laviƒçce.", exampleGr: "ŒöŒ¨Œ∏ŒøŒºŒ±Œπ œÉœÑŒø œÄŒ±Œ≥Œ∫Œ¨Œ∫Œπ.", icon: "ü™ë" },
          { front: "Kvƒõtina", back: "ŒõŒøœÖŒªŒøœçŒ¥Œπ", example: "Kvƒõtina von√≠.", exampleGr: "Œ§Œø ŒªŒøœÖŒªŒøœçŒ¥Œπ ŒºœÖœÅŒØŒ∂ŒµŒπ.", icon: "üå∏" },
          { front: "M√≠ƒç", back: "ŒúœÄŒ¨ŒªŒ±", example: "M√≠ƒç sk√°ƒçe.", exampleGr: "Œó ŒºœÄŒ¨ŒªŒ± œÄŒ∑Œ¥Œ¨ŒµŒπ.", icon: "‚öΩ" },
          { front: "Pes", back: "Œ£Œ∫œçŒªŒøœÇ", example: "Pes bƒõ≈æ√≠.", exampleGr: "Œü œÉŒ∫œçŒªŒøœÇ œÑœÅŒ≠œáŒµŒπ.", icon: "üêï" },
          { front: "D√≠tƒõ", back: "Œ†Œ±ŒπŒ¥ŒØ", example: "D√≠tƒõ se smƒõje.", exampleGr: "Œ§Œø œÄŒ±ŒπŒ¥ŒØ Œ≥ŒµŒªŒ¨ŒµŒπ.", icon: "üßí" }
        ],
        gestures: [
          { label: "Sedni na laviƒçku!", desc: "Posaƒè se jako v parku.", descGr: "ŒöŒ¨œÑœÉŒµ œÉŒ±ŒΩ œÉœÑŒø œÄŒ¨œÅŒ∫Œø.", tone: 600 },
          { label: "Hoƒè m√≠ƒç!", desc: "Naznaƒç hod rukou.", descGr: "ŒöŒ¨ŒΩŒµ œÄœâœÇ œÄŒµœÑŒ¨œÇ ŒºœÄŒ¨ŒªŒ±.", tone: 540 }
        ],
        phrases: [
          { cz: "Jdu do parku.", gr: "Œ†Œ¨œâ œÉœÑŒø œÄŒ¨œÅŒ∫Œø.", tone: 520 },
          { cz: "Sed√≠me na laviƒçce.", gr: "ŒöŒ±Œ∏œåŒºŒ±œÉœÑŒµ œÉœÑŒø œÄŒ±Œ≥Œ∫Œ¨Œ∫Œπ.", tone: 540 },
          { cz: "Pes bƒõ≈æ√≠.", gr: "Œü œÉŒ∫œçŒªŒøœÇ œÑœÅŒ≠œáŒµŒπ.", tone: 560 }
        ],
        pexeso: [],
        story: [
          { who: "Luna", line: "Ahoj, tati! Jdeme do parku?", gr: "ŒìŒµŒπŒ±, ŒºœÄŒ±ŒºœÄŒ¨! Œ†Œ¨ŒºŒµ œÉœÑŒø œÄŒ¨œÅŒ∫Œø;", icon: "üßí", side: "left" },
          { who: "T√°ta", line: "Ano, pojƒè, je tam laviƒçka.", gr: "ŒùŒ±Œπ, Œ≠ŒªŒ±, Œ≠œáŒµŒπ Œ≠ŒΩŒ± œÄŒ±Œ≥Œ∫Œ¨Œ∫Œπ.", icon: "üë®", side: "right" },
          { who: "Luna", line: "Sedneme si a hod√≠m m√≠ƒç.", gr: "ŒöŒ±Œ∏œåŒºŒ±œÉœÑŒµ Œ∫Œ±Œπ œÄŒµœÑŒ¨œâ œÑŒ∑ŒΩ ŒºœÄŒ¨ŒªŒ±.", icon: "‚öΩ", side: "left" },
          { who: "T√°ta", line: "Vid√≠m psa, bƒõ≈æ√≠ pro m√≠ƒç.", gr: "ŒíŒªŒ≠œÄœâ Œ≠ŒΩŒ±ŒΩ œÉŒ∫œçŒªŒø, œÑœÅŒ≠œáŒµŒπ Œ≥ŒπŒ± œÑŒ∑ŒΩ ŒºœÄŒ¨ŒªŒ±.", icon: "üêï", side: "right" },
          { who: "Luna", line: "Kvƒõtina tady kr√°snƒõ von√≠.", gr: "Œ§Œø ŒªŒøœÖŒªŒøœçŒ¥Œπ ŒµŒ¥œé ŒºœÖœÅŒØŒ∂ŒµŒπ œåŒºŒøœÅœÜŒ±.", icon: "üå∏", side: "left" },
          { who: "T√°ta", line: "Park je hezk√Ω, ≈æe?", gr: "ŒåŒºŒøœÅœÜŒø œÄŒ¨œÅŒ∫Œø, Œ≠œÑœÉŒπ;", icon: "üòä", side: "right" },
          { who: "Luna", line: "Ano, ale chci u≈æ dom≈Ø.", gr: "ŒùŒ±Œπ, Œ±ŒªŒªŒ¨ Œ∏Œ≠Œªœâ ŒΩŒ± œÄŒ¨œâ œÉœÄŒØœÑŒπ.", icon: "üßí", side: "left" }
        ]
      }
    };

    function setSectionVisibility(id, visible) {
      const section = document.getElementById(id);
      if (!section) return;
      section.style.display = visible ? "" : "none";
    }

    function renderWords(list = []) {
      const grid = document.getElementById("wordGrid");
      grid.innerHTML = "";
      setSectionVisibility("slova", list.length > 0);
      list.forEach((w) => {
        const btn = document.createElement("button");
        btn.className = "tile";
        btn.style.borderColor = w.color;
        btn.style.background = `radial-gradient(circle at 20% 20%, ${w.color}22, var(--card))`;
        btn.innerHTML = `
          <div class="avatar word-avatar" style="background:${w.color}33;">${w.icon || ""}</div>
          <strong>${w.cz}</strong>
          <small>${w.gr}</small>
          <span class="mini"></span>
        `;
        btn.addEventListener("click", () => {
          playTone(620, 0.18);
          speakGreek(w.gr);
        });
        grid.appendChild(btn);
      });
    }

    function renderFlashcards(data = []) {
      const grid = document.getElementById("flashGrid");
      grid.innerHTML = "";
      setSectionVisibility("karty", data.length > 0);
      data.forEach((card) => {
        const wrap = document.createElement("div");
        wrap.className = "flash-card";

        const inner = document.createElement("div");
        inner.className = "flash-inner";

        inner.innerHTML = `
          <div class="flash-face flash-front">
            <div class="flash-illo" aria-hidden="true">${card.icon || "‚òÖ"}</div>
            <div class="avatar" style="background: rgba(123, 180, 255, 0.18);">CZ</div>
            <strong>${card.front}</strong>
            <small>${card.example}</small>
            <button class="pill">Otoƒçit</button>
          </div>
          <div class="flash-face flash-back">
            <div class="flash-illo" aria-hidden="true">${card.icon || "‚òÖ"}</div>
            <div class="avatar" style="background: rgba(255, 125, 140, 0.2);">GR</div>
            <strong>${card.back}</strong>
            <small>${card.exampleGr || card.example}</small>
            <button class="pill">Zpƒõt</button>
          </div>
        `;
        wrap.addEventListener("click", () => {
          const flipped = inner.dataset.flipped === "true";
          inner.dataset.flipped = (!flipped).toString();
          playTone(flipped ? 540 : 720, 0.16);
          if (!flipped) speakGreek(card.back);
        });
        wrap.appendChild(inner);
        grid.appendChild(wrap);
      });
    }

    function renderGestures(list = []) {
      const listElem = document.getElementById("gestureList");
      listElem.innerHTML = "";
      setSectionVisibility("gesta", list.length > 0);
      list.forEach((g) => {
        const row = document.createElement("div");
        row.className = "gesture-row";
        row.innerHTML = `
          <div class="avatar" style="background: rgba(111, 224, 194, 0.25);">‚úã</div>
          <div style="flex:1;">
            <strong>${g.label}</strong><br>
            <small>${g.desc}</small><br>
            <small>${g.descGr || ""}</small>
          </div>
          <button class="pill" data-tone="${g.tone}">Zkusit</button>
        `;
        row.querySelector("button").addEventListener("click", () => {
          playTone(g.tone, 0.18);
          speakGreek(g.descGr || g.label);
        });
        listElem.appendChild(row);
      });
    }

    function renderPhrases(list = []) {
      const listElem = document.getElementById("phraseList");
      listElem.innerHTML = "";
      setSectionVisibility("fraze", list.length > 0);
      list.forEach((p) => {
        const row = document.createElement("div");
        row.className = "phrase-row";
        row.innerHTML = `
          <div class="avatar" style="background: rgba(255, 125, 140, 0.2);">üó£</div>
          <div style="flex:1;">
            <strong>${p.cz}</strong><br>
            <small>${p.gr}</small>
          </div>
          <button class="pill" data-tone="${p.tone}">P≈ôehr√°t</button>
        `;
        row.querySelector("button").addEventListener("click", () => {
          playTone(p.tone, 0.2);
          speakGreek(p.gr);
        });
        listElem.appendChild(row);
      });
    }

    function renderPexeso(cards = []) {
      const grid = document.getElementById("memoryGrid");
      grid.innerHTML = "";
      state.pexesoOpen = [];
      state.pexesoMatched = new Set();
      setSectionVisibility("pexeso", cards.length > 0);

      const shuffled = [...cards].sort(() => Math.random() - 0.5);
      shuffled.forEach((card, idx) => {
        const btn = document.createElement("button");
        btn.className = "memory-card";
        btn.dataset.id = card.id;
        btn.dataset.index = idx;
        btn.dataset.state = "hidden";
        btn.innerHTML = `<span style="opacity:0;">?</span>`;
        btn.addEventListener("click", () => handlePexesoClick(btn, card));
        grid.appendChild(btn);
      });
      updatePexesoStatus();
    }

    function handlePexesoClick(btn, card) {
      const currentState = btn.dataset.state;
      if (currentState === "matched" || currentState === "open") return;
      if (state.pexesoOpen.length === 2) return;

      btn.dataset.state = "open";
      btn.textContent = card.label;
      playTone(620, 0.16);
      const greekMatch = card.lang === "GR"
        ? card.label
        : ((state.currentLessonData?.pexeso || []).find((c) => c.id === card.id && c.lang === "GR")?.label || card.label);
      speakGreek(greekMatch);
      state.pexesoOpen.push({ btn, card });

      if (state.pexesoOpen.length === 2) {
        const [first, second] = state.pexesoOpen;
        const isMatch = first.card.id === second.card.id && first.btn !== second.btn;
        setTimeout(() => {
          if (isMatch) {
            first.btn.dataset.state = "matched";
            second.btn.dataset.state = "matched";
            state.pexesoMatched.add(first.card.id);
            playTone(820, 0.18);
          } else {
            first.btn.dataset.state = "hidden";
            first.btn.textContent = "?";
            second.btn.dataset.state = "hidden";
            second.btn.textContent = "?";
            playTone(360, 0.14);
          }
          state.pexesoOpen = [];
          updatePexesoStatus();
        }, 650);
      }
    }

    function updatePexesoStatus() {
      const status = document.getElementById("pexesoStatus");
      const totalPairs = (state.currentLessonData?.pexeso?.length || 0) / 2;
      status.textContent = `${state.pexesoMatched.size}/${totalPairs} nalezeno`;
      status.dataset.active = (state.pexesoMatched.size === totalPairs).toString();
    }

    function renderStory(story = [], meta = {}) {
      const wrap = document.getElementById("storyWrap");
      const bar = document.getElementById("storyActorBar");
      wrap.innerHTML = "";
      if (bar) bar.innerHTML = "";
      setSectionVisibility("pribeh", story.length > 0);

      const leftActor = meta.left || { name: "Postava 1", icon: "üôÇ" };
      const rightActor = meta.right || { name: "Postava 2", icon: "üôÇ" };
      if (bar) {
        bar.innerHTML = `
          <div class="actor-chip">
            <div class="actor-icon">${leftActor.icon || "üôÇ"}</div>
            <span>${leftActor.name || "Postava 1"}</span>
          </div>
          <div class="actor-chip" style="justify-self:end;">
            <div class="actor-icon">${rightActor.icon || "üôÇ"}</div>
            <span>${rightActor.name || "Postava 2"}</span>
          </div>
        `;
      }

      story.forEach((scene) => {
        const card = document.createElement("div");
        card.className = "story-card";

        const leftSlot = scene.side === "left" ? `
          <div class="story-slot left">
            <div class="bubble bubble-left">
              <p class="story-line">${scene.line}</p>
              <div class="story-gr">${scene.gr || ""}</div>
            </div>
          </div>
        ` : `<div></div>`;

        const rightSlot = scene.side === "right" ? `
          <div class="story-slot right">
            <div class="bubble bubble-right">
              <p class="story-line">${scene.line}</p>
              <div class="story-gr">${scene.gr || ""}</div>
            </div>
          </div>
        ` : `<div></div>`;

        const action = `<div></div>`;

        card.innerHTML = `
          ${leftSlot}
          ${action}
          ${rightSlot}
        `;

        card.querySelectorAll(".bubble").forEach((bubbleEl) => {
          bubbleEl.addEventListener("click", (e) => {
            e.stopPropagation();
            bubbleEl.classList.toggle("show-gr");
            playTone(500, 0.16);
            if (scene.gr) speakGreek(scene.gr);
          });
        });

        wrap.appendChild(card);
      });
    }

    function setLesson(lessonId = "1") {
      const lesson = lessons[lessonId] || lessons["1"];
      state.currentLesson = lessonId;
      state.currentLessonData = lesson;

      const lessonSelect = document.getElementById("lessonSelect");
      if (lessonSelect && lessonSelect.value !== lessonId) lessonSelect.value = lessonId;

      const brandTitle = document.getElementById("brandTitle");
      const brandBadge = document.getElementById("brandBadge");
      const lessonLabel = document.querySelector(".lesson-label");
      if (brandTitle) brandTitle.textContent = lesson.title;
      if (brandBadge) brandBadge.textContent = `R${lessonId}`;
      if (lessonLabel) lessonLabel.textContent = `Lekce ${lessonId}`;

      renderWords(lesson.words || []);
      renderFlashcards(lesson.flashcards || []);
      renderGestures(lesson.gestures || []);
      renderPhrases(lesson.phrases || []);
      renderPexeso(lesson.pexeso || []);
      renderStory(lesson.story || [], lesson.storyActors || {});
      updatePexesoStatus();
      playTone(540, 0.12);
    }

    function bindControls() {
      const shuffleFlash = document.getElementById("shuffleFlash");
      const resetPexeso = document.getElementById("resetPexeso");
      const lessonSelect = document.getElementById("lessonSelect");

      resetPexeso.addEventListener("click", () => {
        renderPexeso(state.currentLessonData?.pexeso || []);
        playTone(600, 0.2);
      });

      if (lessonSelect) {
        lessonSelect.addEventListener("change", () => {
          setLesson(lessonSelect.value);
        });
      }

      shuffleFlash.addEventListener("click", () => {
        const list = state.currentLessonData?.flashcards || [];
        renderFlashcards([...list].sort(() => Math.random() - 0.5));
        playTone(780, 0.16);
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      setLesson("1");
      bindControls();
    });
  </script>
</body>
</html>
